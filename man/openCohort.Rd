% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Backfill-methods.R
\name{openCohort}
\alias{openCohort}
\alias{openCohort,OpeningMinDose-method}
\alias{openCohort-OpeningMinDose}
\alias{openCohort,OpeningMinCohorts-method}
\alias{openCohort-OpeningMinCohorts}
\alias{openCohort,OpeningNone-method}
\alias{openCohort-OpeningNone}
\alias{openCohort,OpeningMinResponses-method}
\alias{openCohort-OpeningMinResponses}
\title{Open / recruit backfill patients into a cohort?}
\usage{
openCohort(opening, cohort, data, dose, ...)

\S4method{openCohort}{OpeningMinDose}(opening, cohort, data, dose, ...)

\S4method{openCohort}{OpeningMinCohorts}(opening, cohort, data, dose, ...)

\S4method{openCohort}{OpeningNone}(opening, cohort, data, dose, ...)

\S4method{openCohort}{OpeningMinResponses}(opening, cohort, data, dose, ...)
}
\arguments{
\item{opening}{(\code{Opening})\cr opening rule to be applied.}

\item{cohort}{(\code{int})\cr backfill cohort index.}

\item{data}{(\code{Data})\cr current trial data.}

\item{dose}{(\code{numeric})\cr the recommended next best dose.}

\item{...}{further arguments (not used).}
}
\value{
\code{TRUE} if this backfill cohort can be opened / recruited into,
\code{FALSE} otherwise.
}
\description{
\ifelse{html}{\href{https://lifecycle.r-lib.org/articles/stages.html#experimental}{\figure{lifecycle-experimental.svg}{options: alt='[Experimental]'}}}{\strong{[Experimental]}}
}
\section{Functions}{
\itemize{
\item \code{openCohort(OpeningMinDose)}: method for \code{OpeningMinDose} class.

\item \code{openCohort(OpeningMinCohorts)}: method for \code{OpeningMinCohorts} class.

\item \code{openCohort(OpeningNone)}: method for \code{OpeningNone} class.

\item \code{openCohort(OpeningMinResponses)}: method for \code{OpeningMinResponses} class.

}}
\examples{
# Create a simple data object with some dose information
data <- Data(
  x = c(0.1, 0.5, 1.5, 3, 6, 10, 10, 10),
  y = c(0, 0, 0, 0, 0, 0, 1, 0),
  cohort = c(1, 2, 3, 4, 5, 6, 6, 6),
  doseGrid = c(0.1, 0.5, 1.5, 3, 6, seq(from = 10, to = 80, by = 2))
)

# Define the opening rule: open backfill cohorts when dose is at least 5
my_opening <- OpeningMinDose(min_dose = 5)

# Check if the first backfill cohort can be opened when the
# cohort has a dose 6, i.e. larger than 5.
# Note that `dose` is not used in this rule.
can_open <- openCohort(my_opening, cohort = 5, data = data, dose = 7)
can_open

# Check if the first backfill cohort can be opened when the
# cohort has a dose 3, i.e. smaller than 5.
# (should return FALSE because dose < min_dose)
can_open_low <- openCohort(my_opening, cohort = 4, data = data, dose = 15)
can_open_low
# Create a data object with multiple cohorts
data <- Data(
  x = c(0.1, 0.5, 1.5, 3, 6, 10, 10, 10),
  y = c(0, 0, 0, 0, 0, 0, 1, 0),
  cohort = c(0, 1, 2, 3, 4, 5, 5, 5),
  doseGrid = c(0.1, 0.5, 1.5, 3, 6, seq(from = 10, to = 80, by = 2))
)

# Define the opening rule: open backfill cohorts after at least 3 cohorts
my_opening <- OpeningMinCohorts(min_cohorts = 3)

# Check if a backfill cohort can be opened
# Current number of cohorts is 6, so it should open (6 >= 3)
can_open <- openCohort(my_opening, cohort = 1, data = data, dose = 25)
can_open
# Create an OpeningNone object which never opens backfill cohorts
opening <- OpeningNone()

# Create sample trial data
data <- Data(
  x = c(20, 30, 40, 50),
  y = c(0, 0, 1, 0),
  cohort = c(1, 2, 3, 4),
  doseGrid = seq(10, 100, by = 10)
)

# Create dose recommendation
dose <- 60

# Check if backfill cohort should be opened for cohort 5
# OpeningNone always returns FALSE
should_open <- openCohort(opening, cohort = 5, data = data, dose = dose)
print(should_open) # FALSE
# Create an OpeningMinResponses object requiring 2 responses at the cohort dose
opening <- OpeningMinResponses(min_responses = 2, include_lower_doses = FALSE)

# Create sample trial data with responses at different dose levels
data <- Data(
  x = c(10, 10, 20, 20, 20, 30, 30, 30),
  y = c(0, 1, 0, 1, 0, 1, 1, 0),
  response = c(1, 1, NA, 0, 1, NA, 1, 0),
  cohort = c(1, 1, 2, 2, 2, 3, 3, 3),
  doseGrid = seq(10, 100, by = 10)
)

# Check if backfill cohort can be opened at dose 20
# At dose 20, there is 1 response
should_open <- openCohort(opening, cohort = 2, data = data, dose = 30)
print(should_open) # FALSE

# Check at dose 10 where there are 2 responses
should_open_2 <- openCohort(opening, cohort = 1, data = data, dose = 30)
print(should_open_2) # TRUE
}
