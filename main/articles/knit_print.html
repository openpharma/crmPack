<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Describing `crmPack` Objects • crmPack</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Describing `crmPack` Objects">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">crmPack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0.9159</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/trial_definition.html">Trial Definition</a></li>
    <li><a class="dropdown-item" href="../articles/trial_analysis.html">Trial Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/trial_sanity_checks.html">Trial Design: basic sanity checks</a></li>
    <li><a class="dropdown-item" href="../articles/trial_simulation.html">Trial Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/ordinal-crm.html">Ordinal CRM</a></li>
    <li><a class="dropdown-item" href="../articles/rolling-crm.html">Rolling CRM Example</a></li>
    <li><a class="dropdown-item" href="../articles/simulations.html">Simulation study example</a></li>
    <li><a class="dropdown-item" href="../articles/knit_print.html">Describing `crmPack` Objects</a></li>
    <li><a class="dropdown-item" href="../articles/tidy_method.html">Using tidy</a></li>
    <li><a class="dropdown-item" href="../articles/migration_from_the_old_crmPack.html">Migrating from crmPack version 1.0.3</a></li>
    <li><a class="dropdown-item" href="../articles/parallel_computing_with_extensions.html">Parallel computing with extensions</a></li>
    <li><a class="dropdown-item" href="../articles/crmPack-jss-paper.html">Model-based Dose Escalation Designs in R with crmPack (JSS manuscript)</a></li>
    <li><a class="dropdown-item" href="../articles/example.html">crmPack: Object-oriented implementation of CRM designs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item dropdown">
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://openpharma.github.io/crmPack/main">main</a> </div></li>
<!-- end dropdown for versions -->
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reports" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reports</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reports">
<li><a class="dropdown-item" href="../coverage-report/">Coverage report</a></li>
    <li><a class="dropdown-item" href="../unit-test-report/">Unit test report</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/crmPack"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Describing `crmPack` Objects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/openpharma/crmPack/blob/main/vignettes/knit_print.Rmd" class="external-link"><code>vignettes/knit_print.Rmd</code></a></small>
      <div class="d-none name"><code>knit_print.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Objects created by <code>crmPack</code> are almost always S4 objects.
Like all S4 objects, by default they do not render in a particularly
user-friendly way.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CohortSizeDLT-class.html">CohortSizeDLT</a></span><span class="op">(</span>intervals <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, cohort_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cs</span></span></code></pre></div>
<pre><code><span><span class="co">## An object of class "CohortSizeDLT"</span></span>
<span><span class="co">## Slot "intervals":</span></span>
<span><span class="co">## [1] 0 1 2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Slot "cohort_size":</span></span>
<span><span class="co">## [1] 1 3 5</span></span></code></pre>
<p>Fortunately, a little known feature of <code>knitr</code> can put
this right at little or no cost to the end user: in the simplest case,
demonstrated below, all that needs to be done is to reference the object
in a markdown or Quarto chunk.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cs</span></span></code></pre></div>
<table class="table">
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<blockquote>
<p>The <code>knit_print</code>methods provided by <code>crmPack</code>
are not intended to be fully customisable or comprehensive. We do
believe, however, that they cover the vast majority of use-cases and are
easily extended using the techniques described later in this
vignette.</p>
</blockquote>
<blockquote>
<p>Formatting of these objects currently only works for HMTL output. If
another format - such as PDF or Microsoft Word - is required, our
suggested workaround is to create the HTML output and then print or save
the document to the required format.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="how-is-this-done">How is this done?<a class="anchor" aria-label="anchor" href="#how-is-this-done"></a>
</h2>
<p>When running code at the console, the result of an R function or
statement that is not assigned to an object is
<code>print</code>ed. (Unless, of course, it is returned
<code>invisible</code>ly.) The same process appears to happen when the
chunks of a markdown or Quarto document are evaluated. But that is not
quite the case. Instead, the result is passed to an S3 function called
<code>knit_print</code> <span class="citation">(Xie 2024)</span>. It is
the results of running <code>knit_print</code> on the returned
expression that appear in the rendered document.</p>
<p>As a simple demonstration of the concept, consider:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knit_print.DustySpringfield</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="st">"I just don't know what to do with myself"</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">lyric</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="va">lyric</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 10</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">lyric</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"DustySpringfield"</span></span>
<span></span>
<span><span class="va">lyric</span></span></code></pre></div>
<pre><code><span><span class="co">## I just don't know what to do with myself</span></span></code></pre>
<p>The actions of <code>knit_print</code> are entirely arbitrary, but
this mechanism provides developers with an easy way to provide
nicely-rendered versions of any objects that are rendered by
<code>knitr</code>. We have provided such methods for (almost) all
<code>crmPack</code> classes.</p>
</div>
<div class="section level2">
<h2 id="using-knit_print-in-crmpack">Using <code>knit_print</code> in <code>crmPack</code><a class="anchor" aria-label="anchor" href="#using-knit_print-in-crmpack"></a>
</h2>
<p>By default, all that needs to be done is to reference the object to
be printed in a markdown or quarto chunk. This is equivalent to
<code>knit_print(object)</code>. However, the <code>knit_print</code>
methods for most <code>crmPack</code> classes have optional arguments
that can be used to customise the way in which the object is rendered.
To change the default value of any parameter to <code>knit_print</code>
the function must be called explicitly:
<code>knit_print(cs, tox_label = "DLAE")</code>.</p>
<div class="section level3">
<h3 id="common-customisations">Common customisations<a class="anchor" aria-label="anchor" href="#common-customisations"></a>
</h3>
<p>The most commonly needed customisations are to alter the way in which
participants and toxicities are described. These are handled by the
<code>label</code> and <code>tox_label</code> arguments to
<code>knit_print</code>.</p>
<p>These arguments can be provided either as a scalar or a vector of
length 2. If a vector, the first element is taken to describe a single
instance and the second any other number of instances. If a scalar, it
is converted to a vector, whose first element is the scalar value
provided and the second the scalar with <code>"s"</code> appended<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Except for &lt;code&gt;tox_label = "toxicity"&lt;/code&gt;, which
becomes &lt;code&gt;tox_label = c("toxicity", "toxicities")&lt;/code&gt;.&lt;/p&gt;'><sup>1</sup></a>.</p>
<p>So, for example:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/CohortSizeConst-class.html">CohortSizeConst</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p>A constant size of 3 participants.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="fu"><a href="../reference/CohortSizeConst-class.html">CohortSizeConst</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>, label <span class="op">=</span> <span class="st">"subject"</span><span class="op">)</span></span></code></pre></div>
<p>A constant size of 3 subjects.</p>
<p>Dose units are defined by the <code>units</code> parameter. By
default, no units are printed.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Data-class.html">Data</a></span><span class="op">(</span>doseGrid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.9</span>, <span class="fl">2.5</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">d</span></span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.1, 0.3, 0.9, 2.5, 5, 10 and 15.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="va">d</span>, units <span class="op">=</span> <span class="st">"mg/dL"</span><span class="op">)</span></span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.1 mg/dL, 0.3 mg/dL, 0.9 mg/dL, 2.5 mg/dL, 5 mg/dL,
10 mg/dL and 15 mg/dL.</p>
<p>The format used to display dose levels (and other information in
other classes) can be changed with the <code>fmt</code> parameter:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="va">d</span>, units <span class="op">=</span> <span class="st">"mg/dL"</span>, fmt <span class="op">=</span> <span class="st">"%.2f"</span><span class="op">)</span></span></code></pre></div>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 0.10 mg/dL, 0.30 mg/dL, 0.90 mg/dL, 2.50 mg/dL, 5.00
mg/dL, 10.00 mg/dL and 15.00 mg/dL.</p>
<p><code>biomarker_label</code> and <code>biomarker_units</code> allow
the representation of a biomarker to be customised.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DualEndpointRW-class.html">.DefaultDualEndpointRW</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<p>The relationships between dose and toxicity and between dose and PD
biomarker will be modelled simultaneously.</p>
<p>A probit log normal model will describe the relationship between dose
and toxicity:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Φ</mi><mrow><mi>−</mi><mn>1</mn></mrow></msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>T</mi><mi>o</mi><mi>x</mi><mo stretchy="false" form="prefix">|</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>X</mi><mo>=</mo><mn>1</mn><mo stretchy="false" form="prefix">|</mo><mi>θ</mi><mo>,</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>α</mi><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mi>/</mi><msup><mi>d</mi><mo>*</mo></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \Phi^{-1}(Tox | d) = f(X = 1 | \theta, d) = \alpha + \beta \cdot log(d/d^*) </annotation></semantics></math>where
d* denotes a reference dose.</p>
<p>The prior for θ is given
by<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝛉</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>α</mi></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>β</mi></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \boldsymbol\theta = \begin{bmatrix}\alpha \\ \beta\end{bmatrix}\sim N \left(\begin{bmatrix} 0.00 \\  1.00\end{bmatrix} , \begin{bmatrix} 1.00 &amp;  0.00 \\ 0.00 &amp;  1.00\end{bmatrix} \right) </annotation></semantics></math></p>
<p>The reference dose will be 1.00.</p>
<p>The PD biomarker response <code>w</code> at dose <code>d</code> is
modelled as
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><msubsup><mi>σ</mi><mi>w</mi><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> w(d) \sim N(f(d), \sigma_w^2) </annotation></semantics></math></p>
<p>where f(d) is a first order random walk such that</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msub><mi>β</mi><msub><mi>W</mi><mi>i</mi></msub></msub><mo>−</mo><msub><mi>β</mi><msub><mi>W</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></msub><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0.01</mn><mo>×</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> f(d) = \beta_{W_i} - \beta_{W_{i - 1}}\sim N(0, 0.01 \times (d_i - d_{i - 1})) </annotation></semantics></math></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="va">x</span>, biomarker_name <span class="op">=</span> <span class="st">"CRP"</span>, biomarker_units <span class="op">=</span> <span class="st">"mg/dL"</span><span class="op">)</span></span></code></pre></div>
<p>The relationships between dose and toxicity and between dose and PD
biomarker will be modelled simultaneously.</p>
<p>A probit log normal model will describe the relationship between dose
and toxicity:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Φ</mi><mrow><mi>−</mi><mn>1</mn></mrow></msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>T</mi><mi>o</mi><mi>x</mi><mo stretchy="false" form="prefix">|</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>X</mi><mo>=</mo><mn>1</mn><mo stretchy="false" form="prefix">|</mo><mi>θ</mi><mo>,</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>α</mi><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mi>/</mi><msup><mi>d</mi><mo>*</mo></msup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \Phi^{-1}(Tox | d) = f(X = 1 | \theta, d) = \alpha + \beta \cdot log(d/d^*) </annotation></semantics></math>where
d* denotes a reference dose.</p>
<p>The prior for θ is given
by<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝛉</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>α</mi></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>β</mi></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0.00</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \boldsymbol\theta = \begin{bmatrix}\alpha \\ \beta\end{bmatrix}\sim N \left(\begin{bmatrix} 0.00 \\  1.00\end{bmatrix} , \begin{bmatrix} 1.00 &amp;  0.00 \\ 0.00 &amp;  1.00\end{bmatrix} \right) </annotation></semantics></math></p>
<p>The reference dose will be 1.00.</p>
<p>The PD biomarker response <code>w</code> at dose <code>d</code> is
modelled as
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><msubsup><mi>σ</mi><mi>w</mi><mn>2</mn></msubsup><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> w(d) \sim N(f(d), \sigma_w^2) </annotation></semantics></math></p>
<p>where f(d) is a first order random walk such that</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msub><mi>β</mi><msub><mi>W</mi><mi>i</mi></msub></msub><mo>−</mo><msub><mi>β</mi><msub><mi>W</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></msub><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>0.01</mn><mo>×</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>d</mi><mi>i</mi></msub><mo>−</mo><msub><mi>d</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> f(d) = \beta_{W_i} - \beta_{W_{i - 1}}\sim N(0, 0.01 \times (d_i - d_{i - 1})) </annotation></semantics></math></p>
</div>
</div>
<div class="section level2">
<h2 id="rendering-complex-classes">Rendering complex classes<a class="anchor" aria-label="anchor" href="#rendering-complex-classes"></a>
</h2>
<p>Some <code>crmPack</code> classes have slots whose values are
themselves <code>crmPack</code> classes. <code>CohortSizeMax</code> is a
simple example. In these cases, the slot values are each passed to
<code>knit_print</code> in turn.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/CohortSizeMax-class.html">.DefaultCohortSizeMax</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
The maximum of the cohort sizes defined in the following rules:
<table class="table">
<caption>
Defined by the dose to be used in the next cohort
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p><code>knit_print</code> methods for sub-classes of
<code>RuleDesign</code> (and related classes) offer slightly more
control. Here, an overall header for the rendition of the object is
provided by the <code>title</code> parameter (whose value defaults to
“Design” and the slot values are separated by sub-headers. The styling
of the overall header and sub-headers is controlled by the
<code>level</code> parameter. The default value of <code>level</code> is
<code>2L</code>, and the level of slots is defined recursively to be one
more than the level of the parent slot<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Because markdown header styles are defined only for six
levels, the greatest value for &lt;code&gt;level&lt;/code&gt;, including values
generated by nested calls, is &lt;code&gt;6&lt;/code&gt;.&lt;/p&gt;"><sup>2</sup></a>. Class-specific
parameters are passed to slot-specific <code>knit_print</code> methods
using <code>...</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="fu"><a href="../reference/Design-class.html">.DefaultDesign</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="design">Design<a class="anchor" aria-label="anchor" href="#design"></a>
</h2>
<div class="section level3">
<h3 id="dose-toxicity-model">Dose toxicity model<a class="anchor" aria-label="anchor" href="#dose-toxicity-model"></a>
</h3>
<p>A logistic log normal model will describe the relationship between
dose and toxicity:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>T</mi><mi>o</mi><mi>x</mi><mo stretchy="false" form="prefix">|</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>X</mi><mo>=</mo><mn>1</mn><mo stretchy="false" form="prefix">|</mo><mi>θ</mi><mo>,</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><msup><mi>e</mi><mrow><mi>α</mi><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mi>/</mi><msub><mi>d</mi><mrow><mi>r</mi><mi>e</mi><mi>f</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msup><mrow><mn>1</mn><mo>+</mo><msup><mi>e</mi><mrow><mi>α</mi><mo>+</mo><mi>β</mi><mo>⋅</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mi>/</mi><msub><mi>d</mi><mrow><mi>r</mi><mi>e</mi><mi>f</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex"> p(Tox | d) = f(X = 1 | \theta, d) = \frac{e^{\alpha + \beta \cdot log(d/d_{ref})}}{1 + e^{\alpha + \beta \cdot log(d/d_{ref})}} </annotation></semantics></math>where
d<sub>ref</sub> denotes a reference dose.</p>
<p>The prior for θ is given
by<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝛉</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>α</mi></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>β</mi><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mi>−</mi><mn>0.85</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd><mtd columnalign="center" style="text-align: center"><mi>−</mi><mn>0.50</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mi>−</mi><mn>0.50</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>1.00</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \boldsymbol\theta = \begin{bmatrix}\alpha \\ log(\beta)\end{bmatrix}\sim N \left(\begin{bmatrix}-0.85 \\  1.00\end{bmatrix} , \begin{bmatrix} 1.00 &amp; -0.50 \\ -0.50 &amp;  1.00\end{bmatrix} \right) </annotation></semantics></math></p>
<p>The reference dose will be 56.00.</p>
</div>
<div class="section level3">
<h3 id="stopping-rule">Stopping rule<a class="anchor" aria-label="anchor" href="#stopping-rule"></a>
</h3>
<p>If either of the following rules are <code>TRUE</code>:</p>
<ul>
<li>
<p>If both of the following rules are <code>TRUE</code>:</p>
<ul>
<li><p>≥ 3 cohorts dosed: If 3 or more cohorts have been
treated.</p></li>
<li><p>P(0.2 ≤ prob(DLE | NBD) ≤ 0.35) ≥ 0.5: If the probability of
toxicity at the next best dose is in the range [0.20, 0.35] is at least
0.50.</p></li>
</ul>
</li>
<li><p>≥ 20 patients dosed: If 20 or more participants have been
treated.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="escalation-rule">Escalation rule<a class="anchor" aria-label="anchor" href="#escalation-rule"></a>
</h3>
<table class="table">
<caption>
Defined by highest dose administered so far
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Min
</th>
<th style="text-align:right;">
Max
</th>
<th style="text-align:right;">
Increment
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
1.00
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
0.33
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="use-of-placebo">Use of placebo<a class="anchor" aria-label="anchor" href="#use-of-placebo"></a>
</h3>
<p>Placebo will not be administered in the trial.</p>
</div>
<div class="section level3">
<h3 id="dose-recommendation">Dose recommendation<a class="anchor" aria-label="anchor" href="#dose-recommendation"></a>
</h3>
<p>The dose recommended for the next cohort will be chosen in the
following way. First, doses that are ineligible according to the
increments rule will be discarded. Next, any dose for which the mean
posterior probability of toxicity being in the overdose range - (0.35,
1] - is 0.25 or more will also be discarded. Finally, the dose amongst
those remaining which has the highest chance that the mean posterior
probability of toxicity is in the target toxicity range of 0.2 to 0.35
(inclusive) will be selected.</p>
</div>
<div class="section level3">
<h3 id="cohort-size">Cohort size<a class="anchor" aria-label="anchor" href="#cohort-size"></a>
</h3>
The maximum of the cohort sizes defined in the following rules:
<table class="table">
<caption>
Defined by the dose to be used in the next cohort
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Dose
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="observed-data">Observed data<a class="anchor" aria-label="anchor" href="#observed-data"></a>
</h3>
<p>No participants are yet evaluable.</p>
<p>The dose grid is 1, 3, 5, 10, 15, 20, 25, 40, 50, 80 and 100.</p>
</div>
<div class="section level3">
<h3 id="starting-dose">Starting dose<a class="anchor" aria-label="anchor" href="#starting-dose"></a>
</h3>
<p>The starting dose is 3.</p>
<p>Slot headers can be customised using the <code>sections</code>
parameter. <code>sections</code> should be a named vector. Names should
be valid slot names for the object being rendered and values the
requested slot headers.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/Design-class.html">.DefaultDesign</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  sections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"nextBest"</span> <span class="op">=</span> <span class="st">"Selection of the dose for the following cohort"</span>,</span>
<span>    <span class="st">"startingDose"</span> <span class="op">=</span> <span class="st">"Initial dose"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mi>n</mi><mi>o</mi><mi>t</mi><mi>s</mi><mi>h</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>.</mi></mrow><annotation encoding="application/x-tex">Output not shown.</annotation></semantics></math></p>
<blockquote>
<p>It is not possible to omit slots from the rendition of a
<code>crmPack</code> object. If you need to do this, you can either
render the required slots individually, or override the definition of
<code>knit_print</code> for the super class as demonstrated below.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="restoring-console-like-behaviour">Restoring console-like behaviour<a class="anchor" aria-label="anchor" href="#restoring-console-like-behaviour"></a>
</h2>
<p>To restore the default behaviour for <code>crmPack</code> objects,
simply wrap the object in a call to <code>normal_print()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">normal_print</span><span class="op">(</span><span class="va">cs</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## An object of class "CohortSizeDLT"</span></span>
<span><span class="co">## Slot "intervals":</span></span>
<span><span class="co">## [1] 0 1 2</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Slot "cohort_size":</span></span>
<span><span class="co">## [1] 1 3 5</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="accessing-the-output-of-knit_print">Accessing the output of <code>knit_print</code><a class="anchor" aria-label="anchor" href="#accessing-the-output-of-knit_print"></a>
</h2>
<p>One of the parameters of <code><a href="https://rdrr.io/pkg/knitr/man/knit_print.html" class="external-link">knitr::knit_print</a></code> is
<code>asis</code>, with a default value of <code>TRUE</code>.
<code>asis</code> has the same effect as setting the chunk option
<code>output</code> to <code>asis</code>. This is achieved by returning
an object of class <code>knit-asis</code>.</p>
<p>Setting <code>asis</code> to <code>FALSE</code> will display the raw
HTML code generated by <code>knit_print</code> to be displayed.
Alternatively, it may allow easier manipulation of the return value.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csOutput1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="fu"><a href="../reference/CohortSizeDLT-class.html">CohortSizeDLT</a></span><span class="op">(</span>intervals <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, cohort_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">csOutput1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "knit_asis"</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csOutput1</span></span></code></pre></div>
<table class="table">
<caption>
Defined by the number of toxicities so far observed
</caption>
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
No of toxicities
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
Lower
</th>
<th style="text-align:right;">
Upper
</th>
<th style="text-align:right;">
Cohort size
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
5
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csOutput2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/knit_print.html">knit_print</a></span><span class="op">(</span><span class="fu"><a href="../reference/CohortSizeDLT-class.html">CohortSizeDLT</a></span><span class="op">(</span>intervals <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span>, cohort_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>, asis <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">csOutput2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "character"</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csOutput2</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "&lt;table&gt;\n&lt;caption&gt;Defined by the number of toxicities so far observed&lt;/caption&gt;\n &lt;thead&gt;\n&lt;tr&gt;\n&lt;th style=\"border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"&gt;&lt;div style=\"border-bottom: 1px solid #ddd; padding-bottom: 5px; \"&gt;No of toxicities&lt;/div&gt;&lt;/th&gt;\n&lt;th style=\"empty-cells: hide;border-bottom:hidden;\" colspan=\"1\"&gt;&lt;/th&gt;\n&lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;th style=\"text-align:right;\"&gt; Lower &lt;/th&gt;\n   &lt;th style=\"text-align:right;\"&gt; Upper &lt;/th&gt;\n   &lt;th style=\"text-align:right;\"&gt; Cohort size &lt;/th&gt;\n  &lt;/tr&gt;\n &lt;/thead&gt;\n&lt;tbody&gt;\n  &lt;tr&gt;\n   &lt;td style=\"text-align:right;\"&gt; 0 &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; 1 &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; 1 &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;td style=\"text-align:right;\"&gt; 1 &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; 2 &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; 3 &lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n   &lt;td style=\"text-align:right;\"&gt; 2 &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; Inf &lt;/td&gt;\n   &lt;td style=\"text-align:right;\"&gt; 5 &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n\n"</span></span></code></pre>
<p>But with the chunk option <code>output</code> set to
<code>asis</code>…</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">csOutput2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## &lt;table&gt;</span></span>
<span><span class="co">## &lt;caption&gt;Defined by the number of toxicities so far observed&lt;/caption&gt;</span></span>
<span><span class="co">##  &lt;thead&gt;</span></span>
<span><span class="co">## &lt;tr&gt;</span></span>
<span><span class="co">## &lt;th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt;No of toxicities&lt;/div&gt;&lt;/th&gt;</span></span>
<span><span class="co">## &lt;th style="empty-cells: hide;border-bottom:hidden;" colspan="1"&gt;&lt;/th&gt;</span></span>
<span><span class="co">## &lt;/tr&gt;</span></span>
<span><span class="co">##   &lt;tr&gt;</span></span>
<span><span class="co">##    &lt;th style="text-align:right;"&gt; Lower &lt;/th&gt;</span></span>
<span><span class="co">##    &lt;th style="text-align:right;"&gt; Upper &lt;/th&gt;</span></span>
<span><span class="co">##    &lt;th style="text-align:right;"&gt; Cohort size &lt;/th&gt;</span></span>
<span><span class="co">##   &lt;/tr&gt;</span></span>
<span><span class="co">##  &lt;/thead&gt;</span></span>
<span><span class="co">## &lt;tbody&gt;</span></span>
<span><span class="co">##   &lt;tr&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;</span></span>
<span><span class="co">##   &lt;/tr&gt;</span></span>
<span><span class="co">##   &lt;tr&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;</span></span>
<span><span class="co">##   &lt;/tr&gt;</span></span>
<span><span class="co">##   &lt;tr&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; Inf &lt;/td&gt;</span></span>
<span><span class="co">##    &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;</span></span>
<span><span class="co">##   &lt;/tr&gt;</span></span>
<span><span class="co">## &lt;/tbody&gt;</span></span>
<span><span class="co">## &lt;/table&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="sec-override">Providing your own <code>knit_print</code> method<a class="anchor" aria-label="anchor" href="#sec-override"></a>
</h2>
<p>If the methods provided in <code>crmPack</code> don’t do what you
want, it’s easy to roll your own, using standard S3 techniques.</p>
<p>The formal arguments to <code><a href="https://rdrr.io/pkg/knitr/man/knit_print.html" class="external-link">knitr::knit_print</a></code> are
<code>x</code> and <code>...</code>. Additional arguments can be added
after <code>...</code>.</p>
<p>As an example, consider <code>knit_print.NextBestNCRM</code>, which
currently returns a paragraph of text:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/NextBestNCRM-class.html">.DefaultNextBestNCRM</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The dose recommended for the next cohort will be chosen in the
following way. First, doses that are ineligible according to the
increments rule will be discarded. Next, any dose for which the mean
posterior probability of toxicity being in the overdose range - (0.35,
1] - is 0.25 or more will also be discarded. Finally, the dose amongst
those remaining which has the highest chance that the mean posterior
probability of toxicity is in the target toxicity range of 0.2 to 0.35
(inclusive) will be selected.</p>
<p>You might feel this is better presented as a bulleted list. You can
achieve this as follows<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;For simplicity, the &lt;code&gt;tox_label&lt;/code&gt; and
&lt;code&gt;asis&lt;/code&gt; parameters, which are defined in the current
implementation of the function, are omitted in this custom
implementation. They should be preserved in any “real world”
customisation.&lt;/p&gt;"><sup>3</sup></a>:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knit_print.NextBestNCRM</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/asis_output.html" class="external-link">asis_output</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>      <span class="st">"The dose recommended for the next cohort will be chosen in the following "</span>,</span>
<span>      <span class="st">"way.\n\n-  First, doses that are ineligible according to the increments rule "</span>,</span>
<span>      <span class="st">"will be discarded.\n-  Next, any dose for which the mean posterior probability of "</span>,</span>
<span>      <span class="st">" toxicity being in the overdose range - ("</span>,</span>
<span>      <span class="va">x</span><span class="op">@</span><span class="va">overdose</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">", "</span>, <span class="va">x</span><span class="op">@</span><span class="va">overdose</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>      <span class="st">"] - is "</span>,</span>
<span>      <span class="va">x</span><span class="op">@</span><span class="va">max_overdose_prob</span>,</span>
<span>      <span class="st">" or more will also be discarded.\n-  Finally, the dose amongst those remaining "</span>,</span>
<span>      <span class="st">"which has the highest chance that the mean posterior probability of toxicity "</span>,</span>
<span>      <span class="st">"is in the target toxicity range of "</span>,</span>
<span>      <span class="va">x</span><span class="op">@</span><span class="va">target</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>      <span class="st">" to "</span>,</span>
<span>      <span class="va">x</span><span class="op">@</span><span class="va">target</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>      <span class="st">" (inclusive) will be selected.\n\n"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ns-internal.html" class="external-link">registerS3method</a></span><span class="op">(</span><span class="st">"knit_print"</span>, <span class="st">"NextBestNCRM"</span>, <span class="va">knit_print.NextBestNCRM</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/NextBestNCRM-class.html">.DefaultNextBestNCRM</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The dose recommended for the next cohort will be chosen in the
following way.</p>
<ul>
<li>First, doses that are ineligible according to the increments rule
will be discarded.</li>
<li>Next, any dose for which the mean posterior probability of toxicity
being in the overdose range - (0.35, 1] - is 0.25 or more will also be
discarded.</li>
<li>Finally, the dose amongst those remaining which has the highest
chance that the mean posterior probability of toxicity is in the target
toxicity range of 0.2 to 0.35 (inclusive) will be selected.</li>
</ul>
</div>
<div class="section level2">
<h2 id="class-coverage">Class coverage<a class="anchor" aria-label="anchor" href="#class-coverage"></a>
</h2>
<p><code>crmPack</code> defines 123 classes. Custom
<code>knit_print</code> methods exist for 91 of them. Of the remaining
32 classes, 23 are virtual classes that will never be directly
instantiated by end users. That leaves 9 classes for which
<code>knit_print</code> methods may be useful. These classes are listed
below.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Class</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">GeneralSimulations</td>
</tr>
<tr class="even">
<td align="left">DASimulations</td>
</tr>
<tr class="odd">
<td align="left">EffFlexi</td>
</tr>
<tr class="even">
<td align="left">DualSimulations</td>
</tr>
<tr class="odd">
<td align="left">Samples</td>
</tr>
<tr class="even">
<td align="left">StoppingExternal</td>
</tr>
<tr class="odd">
<td align="left">Simulations</td>
</tr>
<tr class="even">
<td align="left">McmcOptions</td>
</tr>
<tr class="odd">
<td align="left">DualSimulationsSummary</td>
</tr>
</tbody>
</table>
<p>The majority of these classes relate to simulation of the operating
characteristics of CRM trials. Reporting of this information is likely
to need customisation that is beyond the scope of a simple function<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The &lt;code&gt;crmPack&lt;/code&gt; team is considering the
creation of markdown or Quarto templates that may assist in this area,
but consider this to be a long-term ambition.&lt;/p&gt;"><sup>4</sup></a>.</p>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Xie2024" class="csl-entry">
Xie, Yihui. 2024. <span>“Custom Print Methods.”</span> <a href="https://cran.r-project.org/web/packages/knitr/vignettes/knit_print.html" class="external-link">https://cran.r-project.org/web/packages/knitr/vignettes/knit_print.html</a>.
</div>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Sabanes Bove, Wai Yin Yeung, Burak Kuersad Guenhan, Giuseppe Palermo, Thomas Jaki, Jiawen Zhu, Ziwei Liao, Dimitris Kontos, Marlene Schulte-Goebel, Doug Kelkhoff, Oliver Boix, Robert Adams, Clara Beck, John Kirkpatrick, F. Hoffmann-La Roche AG, Merck Healthcare KGaA, Bayer AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
